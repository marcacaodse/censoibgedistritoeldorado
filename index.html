<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Censo IBGE - População de Contagem MG - Distrito Sanitário Eldorado</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header-section">
            <a href="https://app.powerbi.com/view?r=eyJrIjoiZTlkOWNhODEtNmU3Ny00OWJiLTkxOGYtM2Q4YzEwZjRlNTRkIiwidCI6ImFlODYzMzdlLTU3NWUtNDMzMC05NDc2LTkzZGU2ODJiMDAyMCJ9" 
               class="btn-power-bi" target="_blank">
                <i class="fas fa-chart-line"></i> Relatórios Detalhado BI
            </a>
            <div class="header-content">
                <h1 class="main-title">Censo IBGE</h1>
                <p class="subtitle">População de Contagem MG - Distrito Sanitário Eldorado</p>
                <div class="signature">
                    Página Criada por Ana P. A. Silva Matr.201704/Ref. Vivver/Distrito Eldorado
                </div>
            </div>
        </div>

        <!-- Filtros -->
        <div class="filters-section">
            <h3 class="mb-4"><i class="fas fa-filter"></i> Filtros de Dados</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="filter-group">
                    <label class="filter-label">Unidade de Saúde (Distrito Eldorado)</label>
                    <div class="multi-select-container" id="ubsFilterContainer">
                        <div class="multi-select-header" onclick="toggleMultiSelect('ubsFilter')">
                            <span class="selected-text" id="ubsSelectedText">Todas as Unidades</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="multi-select-dropdown" id="ubsFilterDropdown">
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_all" value="" checked onchange="handleSelectAll('ubs')">
                                <label for="ubs_all">Todas as Unidades</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_agua_branca" value="Água Branca" onchange="handleOptionChange('ubs')">
                                <label for="ubs_agua_branca">Água Branca</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_bela_vista" value="Bela Vista" onchange="handleOptionChange('ubs')">
                                <label for="ubs_bela_vista">Bela Vista</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_csu_eldorado" value="CSU Eldorado" onchange="handleOptionChange('ubs')">
                                <label for="ubs_csu_eldorado">CSU Eldorado</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_jardim_bandeirantes" value="Jardim Bandeirantes" onchange="handleOptionChange('ubs')">
                                <label for="ubs_jardim_bandeirantes">Jardim Bandeirantes</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_jardim_eldorado" value="Jardim Eldorado" onchange="handleOptionChange('ubs')">
                                <label for="ubs_jardim_eldorado">Jardim Eldorado</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_novo_eldorado" value="Novo Eldorado" onchange="handleOptionChange('ubs')">
                                <label for="ubs_novo_eldorado">Novo Eldorado</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_parque_sao_joao" value="Parque São João" onchange="handleOptionChange('ubs')">
                                <label for="ubs_parque_sao_joao">Parque São João</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_perobas" value="Perobas" onchange="handleOptionChange('ubs')">
                                <label for="ubs_perobas">Perobas</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_santa_cruz" value="Santa Cruz" onchange="handleOptionChange('ubs')">
                                <label for="ubs_santa_cruz">Santa Cruz</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="ubs_unidade_xv" value="Unidade XV" onchange="handleOptionChange('ubs')">
                                <label for="ubs_unidade_xv">Unidade XV</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Índice de Vulnerabilidade/2021</label>
                    <div class="multi-select-container" id="vulnerabilityFilterContainer">
                        <div class="multi-select-header" onclick="toggleMultiSelect('vulnerabilityFilter')">
                            <span class="selected-text" id="vulnerabilitySelectedText">Todos os Índices</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="multi-select-dropdown" id="vulnerabilityFilterDropdown">
                            <div class="multi-select-option">
                                <input type="checkbox" id="vulnerability_all" value="" checked onchange="handleSelectAll('vulnerability')">
                                <label for="vulnerability_all">Todos os Índices</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="vulnerability_baixa" value="Baixa" onchange="handleOptionChange('vulnerability')">
                                <label for="vulnerability_baixa">Baixa</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="vulnerability_media" value="Média" onchange="handleOptionChange('vulnerability')">
                                <label for="vulnerability_media">Média</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="vulnerability_elevada" value="Elevada" onchange="handleOptionChange('vulnerability')">
                                <label for="vulnerability_elevada">Elevada</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="vulnerability_muito_elevada" value="Muito Elevada" onchange="handleOptionChange('vulnerability')">
                                <label for="vulnerability_muito_elevada">Muito Elevada</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Faixa Etária Censo 2021</label>
                    <div class="multi-select-container" id="ageGroupFilterContainer">
                        <div class="multi-select-header" onclick="toggleMultiSelect('ageGroupFilter')">
                            <span class="selected-text" id="ageGroupSelectedText">Todas as Faixas</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="multi-select-dropdown" id="ageGroupFilterDropdown">
                            <div class="multi-select-option">
                                <input type="checkbox" id="age_all" value="" checked onchange="handleSelectAll('ageGroup')">
                                <label for="age_all">Todas as Faixas</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="age_0_4" value="0 a 4 anos" onchange="handleOptionChange('ageGroup')">
                                <label for="age_0_4">0 a 4 anos</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="age_5_11" value="5 a 11 anos" onchange="handleOptionChange('ageGroup')">
                                <label for="age_5_11">5 a 11 anos</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="age_12_17" value="12 a 17 anos" onchange="handleOptionChange('ageGroup')">
                                <label for="age_12_17">12 a 17 anos</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="age_18_29" value="18 a 29 anos" onchange="handleOptionChange('ageGroup')">
                                <label for="age_18_29">18 a 29 anos</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="age_30_59" value="30 a 59 anos" onchange="handleOptionChange('ageGroup')">
                                <label for="age_30_59">30 a 59 anos</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="age_60_plus" value="60 anos ou mais" onchange="handleOptionChange('ageGroup')">
                                <label for="age_60_plus">60 anos ou mais</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Distrito</label>
                    <div class="multi-select-container" id="districtFilterContainer">
                        <div class="multi-select-header" onclick="toggleMultiSelect('districtFilter')">
                            <span class="selected-text" id="districtSelectedText">Todos os Distritos</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="multi-select-dropdown" id="districtFilterDropdown">
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_all" value="" checked onchange="handleSelectAll('district')">
                                <label for="district_all">Todos os Distritos</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_eldorado" value="ELDORADO" onchange="handleOptionChange('district')">
                                <label for="district_eldorado">Eldorado</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_ressaca" value="RESSACA" onchange="handleOptionChange('district')">
                                <label for="district_ressaca">Ressaca</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_sede" value="SEDE" onchange="handleOptionChange('district')">
                                <label for="district_sede">Sede</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_industrial" value="INDUSTRIAL" onchange="handleOptionChange('district')">
                                <label for="district_industrial">Industrial</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_riacho" value="RIACHO" onchange="handleOptionChange('district')">
                                <label for="district_riacho">Riacho</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_nacional" value="NACIONAL" onchange="handleOptionChange('district')">
                                <label for="district_nacional">Nacional</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_vargem" value="VARGEM_DAS_FLORES" onchange="handleOptionChange('district')">
                                <label for="district_vargem">Vargem das Flores</label>
                            </div>
                            <div class="multi-select-option">
                                <input type="checkbox" id="district_petrolandia" value="PETROLANDIA" onchange="handleOptionChange('district')">
                                <label for="district_petrolandia">Petrolândia</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn-action btn-clear" onclick="clearFilters()">
                    <i class="fas fa-eraser"></i> Limpar Filtros
                </button>
                <button class="btn-action btn-download" onclick="downloadExcel()">
                    <i class="fas fa-download"></i> Baixar Excel
                </button>
            </div>
        </div>

        <!-- Estatísticas Gerais -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-number" id="eldoradoPopulation">...</div>
                <div class="stat-label">Pop. Distrito Eldorado/2022 (Filtro Unidade)</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalPopulation">...</div>
                <div class="stat-label">População Total do Município (2022)</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalUBS">...</div>
                <div class="stat-label">Unidades no Distrito</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalDistricts">...</div>
                <div class="stat-label">Distritos</div>
            </div>
        </div>

        <!-- Gráficos -->
        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">População por Faixa Etária (2021)</div>
                <div class="chart-wrapper">
                    <canvas id="ageGroupChart"></canvas>
                </div>
                <div class="custom-legend" id="ageGroupLegend"></div>
            </div>
            <div class="chart-container">
                <div class="chart-title">Vulnerabilidade por Unidade (2021)</div>
                <div class="chart-wrapper">
                    <canvas id="vulnerabilityChart"></canvas>
                </div>
                <div class="custom-legend" id="vulnerabilityLegend"></div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">População por Unidade (2022)</div>
                <div class="chart-wrapper">
                    <canvas id="ubsChart"></canvas>
                </div>
                <div class="custom-legend" id="ubsLegend"></div>
            </div>
            <div class="chart-container">
                <div class="chart-title">População por Distrito (2010 vs 2022)</div>
                <div class="chart-wrapper">
                    <canvas id="historicalChart"></canvas>
                </div>
                <div class="custom-legend" id="historicalLegend"></div>
            </div>
        </div>

        <!-- NOVO GRÁFICO: População por Distrito (Censo 2021) -->
        <div class="charts-grid">
            <div class="chart-container chart-full-width">
                <div class="chart-title">População por Distrito - Censo 2021 (Dados Detalhados por Faixa Etária)</div>
                <div class="chart-wrapper chart-large">
                    <canvas id="districtCensusChart"></canvas>
                </div>
                <div class="custom-legend" id="districtCensusLegend"></div>
            </div>
        </div>

        <!-- Tabela: População por Distrito 2010-2022 -->
        <div class="data-table">
            <div class="table-header">
                <i class="fas fa-table"></i> População por Distrito - Comparativo 2010 vs 2022
            </div>
            <div class="table-content">
                <table class="table" id="districtTable">
                    <thead>
                        <tr>
                            <th>Distrito</th>
                            <th>População 2010</th>
                            <th>População 2022</th>
                            <th>Crescimento</th>
                            <th>% Crescimento</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Conteúdo gerado pelo script.js -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- NOVA TABELA: Dados Detalhados do Censo 2021 por Distrito -->
        <div class="data-table">
            <div class="table-header">
                <i class="fas fa-users"></i> Censo 2021 - População por Faixa Etária e Distrito
            </div>
            <div class="table-content">
                <div class="table-controls">
                    <div class="search-box">
                        <input type="text" id="censusTableSearch" placeholder="Buscar faixa etária..." class="search-input">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table class="table" id="censusTable">
                        <thead>
                            <tr>
                                <th class="sticky-column">Faixa Etária</th>
                                <th>Eldorado</th>
                                <th>Ressaca</th>
                                <th>Sede</th>
                                <th>Industrial</th>
                                <th>Riacho</th>
                                <th>Nacional</th>
                                <th>Vargem das Flores</th>
                                <th>Petrolândia</th>
                                <th class="total-column">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Conteúdo gerado pelo script.js -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tabela UBS Eldorado -->
        <div class="data-table">
            <div class="table-header">
                <i class="fas fa-hospital"></i> Unidades de Saúde do Distrito Eldorado - Dados Populacionais
            </div>
            <div class="table-content">
                <table class="table" id="ubsTable">
                    <thead>
                        <tr>
                            <th>Unidade</th>
                            <th>População Cadastrada</th>
                            <th>Vulnerabilidade Predominante</th>
                            <th>Faixa Etária Majoritária</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Conteúdo gerado pelo script.js -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="./script.js"></script>
</body>
</html>

